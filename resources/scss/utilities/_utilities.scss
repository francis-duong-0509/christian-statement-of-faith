// ============================================
// UTILITIES
// ============================================

// Back to Top Button
.back-to-top {
  position: fixed;
  bottom: 2rem;
  right: 2rem;
  z-index: $zindex-fixed;
  @include center-flex;
  width: 3rem;
  height: 3rem;
  background-color: $primary;
  color: $white;
  border: none;
  border-radius: 50%;
  box-shadow: $box-shadow-lg;
  cursor: pointer;
  opacity: 0;
  visibility: hidden;
  transition: $transition-base;

  &.show {
    opacity: 1;
    visibility: visible;
  }

  &:hover {
    background-color: $primary-dark;
    transform: translateY(-4px);
    box-shadow: $box-shadow-xl;
  }

  @include respond-below(md) {
    bottom: 1rem;
    right: 1rem;
    width: 2.5rem;
    height: 2.5rem;
  }
}

// Divider
.divider {
  height: 1px;
  background-color: $divider-color;
  border: none;
  margin: 2rem 0;

  &.divider-thick {
    height: 2px;
  }

  &.divider-dashed {
    background-image: linear-gradient(to right, $divider-color 50%, transparent 50%);
    background-size: 10px 1px;
    background-repeat: repeat-x;
    height: 1px;
    background-color: transparent;
  }
}

// Loading Spinner
.spinner {
  @include center-flex;
  width: 100%;
  padding: 3rem;

  &::after {
    content: '';
    width: 3rem;
    height: 3rem;
    border: 4px solid $gray-200;
    border-top-color: $primary;
    border-radius: 50%;
    animation: spin 0.8s linear infinite;
  }
}

@keyframes spin {
  to {
    transform: rotate(360deg);
  }
}

// Empty State
.empty-state {
  text-align: center;
  padding: 4rem 2rem;

  .empty-icon {
    font-size: 4rem;
    color: $gray-300;
    margin-bottom: 1.5rem;
  }

  .empty-title {
    font-size: 1.5rem;
    font-weight: $font-weight-semibold;
    color: $text-primary;
    margin-bottom: 0.75rem;
  }

  .empty-description {
    font-size: 1.0625rem;
    color: $text-secondary;
    margin-bottom: 1.5rem;
  }
}

// Alert/Notice
.alert {
  padding: 1rem 1.25rem;
  border-radius: $border-radius;
  margin-bottom: 1.5rem;
  border: 1px solid transparent;

  .alert-title {
    font-weight: $font-weight-semibold;
    margin-bottom: 0.5rem;
  }

  &.alert-info {
    background-color: $info-light;
    border-color: $info;
    color: darken($info, 30%);
  }

  &.alert-success {
    background-color: $success-light;
    border-color: $success;
    color: darken($success, 30%);
  }

  &.alert-warning {
    background-color: $warning-light;
    border-color: $warning;
    color: darken($warning, 40%);
  }

  &.alert-danger {
    background-color: $danger-light;
    border-color: $danger;
    color: darken($danger, 20%);
  }
}

// Spacing Utilities
@each $prop, $abbrev in (margin: m, padding: p) {
  @each $size, $value in $spacers {
    .#{$abbrev}-#{$size} { #{$prop}: $value !important; }
    .#{$abbrev}t-#{$size} { #{$prop}-top: $value !important; }
    .#{$abbrev}b-#{$size} { #{$prop}-bottom: $value !important; }
    .#{$abbrev}l-#{$size} { #{$prop}-left: $value !important; }
    .#{$abbrev}r-#{$size} { #{$prop}-right: $value !important; }
    .#{$abbrev}x-#{$size} {
      #{$prop}-left: $value !important;
      #{$prop}-right: $value !important;
    }
    .#{$abbrev}y-#{$size} {
      #{$prop}-top: $value !important;
      #{$prop}-bottom: $value !important;
    }
  }
}

// Display Utilities
.d-none { display: none !important; }
.d-block { display: block !important; }
.d-inline { display: inline !important; }
.d-inline-block { display: inline-block !important; }
.d-flex { display: flex !important; }
.d-inline-flex { display: inline-flex !important; }
.d-grid { display: grid !important; }

// Flex Utilities
.flex-row { flex-direction: row !important; }
.flex-column { flex-direction: column !important; }
.flex-wrap { flex-wrap: wrap !important; }
.flex-nowrap { flex-wrap: nowrap !important; }

.justify-content-start { justify-content: flex-start !important; }
.justify-content-end { justify-content: flex-end !important; }
.justify-content-center { justify-content: center !important; }
.justify-content-between { justify-content: space-between !important; }
.justify-content-around { justify-content: space-around !important; }

.align-items-start { align-items: flex-start !important; }
.align-items-end { align-items: flex-end !important; }
.align-items-center { align-items: center !important; }
.align-items-baseline { align-items: baseline !important; }
.align-items-stretch { align-items: stretch !important; }

.gap-1 { gap: map-get($spacers, 1) !important; }
.gap-2 { gap: map-get($spacers, 2) !important; }
.gap-3 { gap: map-get($spacers, 3) !important; }
.gap-4 { gap: map-get($spacers, 4) !important; }
.gap-5 { gap: map-get($spacers, 5) !important; }

// Width & Height Utilities
.w-25 { width: 25% !important; }
.w-50 { width: 50% !important; }
.w-75 { width: 75% !important; }
.w-100 { width: 100% !important; }
.w-auto { width: auto !important; }

.h-25 { height: 25% !important; }
.h-50 { height: 50% !important; }
.h-75 { height: 75% !important; }
.h-100 { height: 100% !important; }
.h-auto { height: auto !important; }

// Position Utilities
.position-static { position: static !important; }
.position-relative { position: relative !important; }
.position-absolute { position: absolute !important; }
.position-fixed { position: fixed !important; }
.position-sticky { position: sticky !important; }

// Overflow Utilities
.overflow-auto { overflow: auto !important; }
.overflow-hidden { overflow: hidden !important; }
.overflow-visible { overflow: visible !important; }
.overflow-scroll { overflow: scroll !important; }

// Responsive Display Utilities
@each $breakpoint in map-keys($grid-breakpoints) {
  @include respond-above($breakpoint) {
    .d-#{$breakpoint}-none { display: none !important; }
    .d-#{$breakpoint}-block { display: block !important; }
    .d-#{$breakpoint}-flex { display: flex !important; }
    .d-#{$breakpoint}-grid { display: grid !important; }
  }
}

// Screen Reader Only
.sr-only {
  @include sr-only;
}

// Visually Hidden but focusable
.sr-only-focusable {
  &:not(:focus):not(:focus-within) {
    @include sr-only;
  }
}

// Rounded Corners
.rounded { border-radius: $border-radius !important; }
.rounded-sm { border-radius: $border-radius-sm !important; }
.rounded-lg { border-radius: $border-radius-lg !important; }
.rounded-xl { border-radius: $border-radius-xl !important; }
.rounded-pill { border-radius: $border-radius-pill !important; }
.rounded-circle { border-radius: 50% !important; }
.rounded-0 { border-radius: 0 !important; }

// Shadow Utilities
.shadow-none { box-shadow: none !important; }
.shadow-sm { box-shadow: $box-shadow-sm !important; }
.shadow { box-shadow: $box-shadow !important; }
.shadow-md { box-shadow: $box-shadow-md !important; }
.shadow-lg { box-shadow: $box-shadow-lg !important; }
.shadow-xl { box-shadow: $box-shadow-xl !important; }

// Background Colors
.bg-white { background-color: $white !important; }
.bg-light { background-color: $gray-50 !important; }
.bg-gray { background-color: $gray-100 !important; }
.bg-dark { background-color: $gray-900 !important; }
.bg-primary { background-color: $primary !important; }
.bg-secondary { background-color: $secondary !important; }
.bg-success { background-color: $success !important; }
.bg-info { background-color: $info !important; }
.bg-warning { background-color: $warning !important; }
.bg-danger { background-color: $danger !important; }
.bg-transparent { background-color: transparent !important; }

// Border Utilities
.border { border: 1px solid $border-color !important; }
.border-0 { border: 0 !important; }
.border-top { border-top: 1px solid $border-color !important; }
.border-bottom { border-bottom: 1px solid $border-color !important; }
.border-left { border-left: 1px solid $border-color !important; }
.border-right { border-right: 1px solid $border-color !important; }

.border-primary { border-color: $primary !important; }
.border-secondary { border-color: $secondary !important; }
.border-success { border-color: $success !important; }
.border-danger { border-color: $danger !important; }
.border-warning { border-color: $warning !important; }
.border-info { border-color: $info !important; }
